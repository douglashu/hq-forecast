<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hq.flood.dao.custom.RoleTemplateDao">
    <resultMap id="BaseResultMap" type="com.hq.flood.entity.generate.TFloodRoleTemplate">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Fri Feb 10 13:45:09 CST 2017.
        -->
        <id column="id" jdbcType="INTEGER" property="id" />
        <result column="template_name" jdbcType="VARCHAR" property="templateName" />
        <result column="sequence" jdbcType="INTEGER" property="sequence" />
        <result column="state" jdbcType="TINYINT" property="state" />
    </resultMap>

    <select id="findTemplateByRoleId" resultMap="BaseResultMap">
        select 	fr.*
        from 	t_flood_role_template fr
        where 1=1
        and fr.state = 0
        and fr.sequence > (
        select sequence from t_flood_role_template t
        INNER join t_flood_role frr on t.id = frr.template_id
        where 1=1
        and t.state = 0
        and frr.role_id = #{roleId}
        )
    </select>


</mapper>